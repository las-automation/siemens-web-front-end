<div class="container">

  <mat-card class="kpi-container">
    <!-- Removida a seção 'Máquina Mais Produtiva' -->

    <div class="kpi-card">
      <mat-icon class="kpi-icon">flash_on</mat-icon>
      <div>
        <p class="kpi-title">Consumo Total</p>
        <p class="kpi-value">{{ consumoTotalCorrente.toFixed(2) }} A</p>
        <p class="kpi-sub-value">Corrente somada</p>
      </div>
    </div>

    <div class="kpi-card">
      <mat-icon class="kpi-icon">trending_up</mat-icon>
      <div>
        <p class="kpi-title">Eficiência Média</p>
        <p class="kpi-value">{{ eficienciaMedia.toFixed(1) }}%</p>
        <p class="kpi-sub-value">Média geral</p>
      </div>
    </div>

    <div class="kpi-card">
      <mat-icon class="kpi-icon">warning</mat-icon>
      <div>
        <p class="kpi-title">Alertas no Dia</p>
        <p class="kpi-value">{{ alertasNoDia }}</p>
        <p class="kpi-sub-value">Registos críticos</p>
      </div>
    </div>
  </mat-card>

  <!-- Tabela com os dados detalhados -->
  <!-- CORREÇÃO: Passando [reportData]="latestReport" para o componente filho -->
  <app-machines-report 
    [reportData]="latestReport" 
    (viewChartClicked)="abrirGrafico($event)">
  </app-machines-report>
</div>
