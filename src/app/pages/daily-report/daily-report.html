<!-- Ficheiro: src/app/pages/daily-report/daily-report.html -->
<div class="report-container">
  <h1>Relatório Diário de Produção</h1>
  <p class="report-date">Data: 14 de Julho de 2025</p>

  <!-- Secção de KPIs com Cards -->
  <div class="kpi-grid">
    @if (maquinaMaisTrabalhadora) {
      <mat-card>
        <mat-card-header>
          <mat-card-title>Máquina Mais Produtiva</mat-card-title>
          <mat-card-subtitle>Equipamento com mais horas de operação</mat-card-subtitle>
        </mat-card-header>
        <mat-card-content>
            <p class="kpi-value">{{ maquinaMaisTrabalhadora.nomeMaquina }}</p>
            <p class="kpi-sub-value">{{ maquinaMaisTrabalhadora.horasTrabalhadas.toFixed(1) }} horas</p>
        </mat-card-content>
      </mat-card>
    } @else {
      <mat-card>
        <mat-card-header>
          <mat-card-title>Máquina Mais Produtiva</mat-card-title>
        </mat-card-header>
        <mat-card-content>
          <p class="kpi-value">Calculando...</p>
        </mat-card-content>
      </mat-card>
    }

    <mat-card>
      <mat-card-header>
        <mat-card-title>Consumo Total de Corrente</mat-card-title>
        <mat-card-subtitle>Soma de todos os equipamentos</mat-card-subtitle>
      </mat-card-header>
      <mat-card-content>
        <p class="kpi-value">{{ consumoTotalCorrente.toFixed(2) }} kWh</p>
      </mat-card-content>
    </mat-card>

    <mat-card>
      <mat-card-header>
        <mat-card-title>Eficiência Média da Planta</mat-card-title>
        <mat-card-subtitle>Média de todas as máquinas</mat-card-subtitle>
      </mat-card-header>
      <mat-card-content>
        <p class="kpi-value">{{ eficienciaMedia.toFixed(2) }} %</p>
      </mat-card-content>
    </mat-card>
  </div>

  <button mat-raised-button color="accent" (click)="salvarPrimeiroRelatorio()">
  Salvar Dados da Primeira Máquina
</button>
  <!-- Tabela com os dados detalhados -->
   <app-machines-report [reportData]="reportData"></app-machines-report>
</div>
