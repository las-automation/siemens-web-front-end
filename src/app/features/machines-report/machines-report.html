<h2>Detalhes do Último Relatório</h2>
<!--
O truque está aqui: [dataSource]="[reportData]".
Como a Mat-Table espera um array, nós criamos um array contendo
o nosso único objeto 'reportData'.
-->
@if (reportData) {
  <table mat-table [dataSource]="reportData ? [reportData] : []" class="mat-elevation-z8">
    <!-- Coluna: Data e Hora -->
    <ng-container matColumnDef="data_hora">
      <th mat-header-cell *matHeaderCellDef> Data e Hora </th>
      <td mat-cell *matCellDef="let element"> {{element.data_hora | date:'dd/MM/yyyy HH:mm:ss'}} </td>
    </ng-container>
    <!-- Coluna: Nível Conz1 -->
    <ng-container matColumnDef="conz1_nivel">
      <th mat-header-cell *matHeaderCellDef> Nível Conz1 </th>
      <td mat-cell *matCellDef="let element"> {{element.conz1_nivel.toFixed(2)}} </td>
    </ng-container>
    <!-- Coluna: Nível Conz2 -->
    <ng-container matColumnDef="conz2_nivel">
      <th mat-header-cell *matHeaderCellDef> Nível Conz2 </th>
      <td mat-cell *matCellDef="let element"> {{element.conz2_nivel.toFixed(2)}} </td>
    </ng-container>
    <!-- Coluna: Temperatura -->
    <ng-container matColumnDef="tem2_c">
      <th mat-header-cell *matHeaderCellDef> Temp. (°C) </th>
      <td mat-cell *matCellDef="let element"> {{element.tem2_c.toFixed(1)}} °C </td>
    </ng-container>
    <!-- Coluna: Corrente Pre1 -->
    <ng-container matColumnDef="pre1_amp">
      <th mat-header-cell *matHeaderCellDef> Corrente Pre1 (A) </th>
      <td mat-cell *matCellDef="let element"> {{element.pre1_amp.toFixed(2)}} A </td>
    </ng-container>
    <!-- Adicione as outras colunas (pre2_amp, pre3_amp, pre4_amp, q90h, usuario) seguindo o mesmo padrão -->
    <ng-container matColumnDef="pre2_amp">
      <th mat-header-cell *matHeaderCellDef> Corrente Pre2 (A) </th>
      <td mat-cell *matCellDef="let element"> {{element.pre2_amp.toFixed(2)}} A </td>
    </ng-container>
    <ng-container matColumnDef="pre3_amp">
      <th mat-header-cell *matHeaderCellDef> Corrente Pre3 (A) </th>
      <td mat-cell *matCellDef="let element"> {{element.pre3_amp.toFixed(2)}} A </td>
    </ng-container>
    <ng-container matColumnDef="pre4_amp">
      <th mat-header-cell *matHeaderCellDef> Corrente Pre4 (A) </th>
      <td mat-cell *matCellDef="let element"> {{element.pre4_amp.toFixed(2)}} A </td>
    </ng-container>
    <ng-container matColumnDef="q90h">
      <th mat-header-cell *matHeaderCellDef> Eficiência (q90h) </th>
      <td mat-cell *matCellDef="let element"> {{element.q90h.toFixed(1)}}% </td>
    </ng-container>
    <ng-container matColumnDef="usuario">
      <th mat-header-cell *matHeaderCellDef> Usuário </th>
      <td mat-cell *matCellDef="let element"> {{element.usuario}} </td>
    </ng-container>
    <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
    <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
  </table>
}

@if (!reportData) {
  <div class="loading-message">
    A aguardar o primeiro relatório...
  </div>
}
